const { Client, LocalAuth, MessageMedia } = require('whatsapp-web.js');
const qrcode = require('qrcode-terminal');
const fs = require('fs-extra');
const cron = require('node-cron');
const moment = require('moment');

// Configura√ß√µes do bot
const CONFIG = {
    // C√≥digo secreto para ativar o bot
    SECRET_CODE: 'BBSTH',
    
    // Configura√ß√µes de arquivos
    SESSION_PATH: './session',
    DATA_FILE: './bot_data.json',
    
    // Configura√ß√µes do bot
    BOT_NAME: 'ü§ñ Bot Divulga√ß√£o Avan√ßado',
    
    // Configura√ß√µes do Puppeteer para Termux
    PUPPETEER_CONFIG: {
        headless: true,
        args: [
            '--no-sandbox',
            '--disable-setuid-sandbox',
            '--disable-dev-shm-usage',
            '--disable-accelerated-2d-canvas',
            '--no-first-run',
            '--no-zygote',
            '--single-process',
            '--disable-gpu',
            '--disable-web-security',
            '--disable-features=VizDisplayCompositor'
        ]
    }
};

// Inicializar cliente WhatsApp
const client = new Client({
    authStrategy: new LocalAuth({
        clientId: "bot-divulgacao-avancado",
        dataPath: CONFIG.SESSION_PATH
    }),
    puppeteer: CONFIG.PUPPETEER_CONFIG
});

// Vari√°veis globais
let botData = {
    isActive: false,
    authorizedUsers: [],
    messages: [],
    groups: [],
    scheduledJobs: {}
};

let grupos = [];

// Fun√ß√µes auxiliares
function carregarDados() {
    try {
        if (fs.existsSync(CONFIG.DATA_FILE)) {
            botData = JSON.parse(fs.readFileSync(CONFIG.DATA_FILE, 'utf8'));
        }
    } catch (error) {
        console.log('Erro ao carregar dados:', error.message);
    }
}

function salvarDados() {
    try {
        fs.writeFileSync(CONFIG.DATA_FILE, JSON.stringify(botData, null, 2));
    } catch (error) {
        console.log('Erro ao salvar dados:', error.message);
    }
}

function isAuthorized(userId) {
    return botData.authorizedUsers.includes(userId);
}

function formatarTempo() {
    return moment().format('DD/MM/YYYY HH:mm:ss');
}

function formatarDuracao(ms) {
    const duration = moment.duration(ms);
    const horas = Math.floor(duration.asHours());
    const minutos = duration.minutes();
    const segundos = duration.seconds();
    
    if (horas > 0) {
        return `${horas}h ${minutos}m ${segundos}s`;
    } else if (minutos > 0) {
        return `${minutos}m ${segundos}s`;
    } else {
        return `${segundos}s`;
    }
}

async function obterMembrosGrupo(groupId) {
    try {
        const chat = await client.getChatById(groupId);
        if (chat.isGroup) {
            return chat.participants.map(p => p.id._serialized);
        }
        return [];
    } catch (error) {
        console.log('Erro ao obter membros do grupo:', error.message);
        return [];
    }
}

async function enviarMensagemComMencoes(groupId, texto) {
    try {
        const membros = await obterMembrosGrupo(groupId);
        
        if (membros.length === 0) {
            await client.sendMessage(groupId, texto);
            return;
        }
        
        // Criar men√ß√µes para todos os membros
        const mentions = membros;
        
        // Adicionar men√ß√µes ao texto
        let textoComMencoes = texto + '\n\n';
        textoComMencoes += 'üë• ' + membros.map(id => `@${id.split('@')[0]}`).join(' ');
        
        await client.sendMessage(groupId, textoComMencoes, { mentions });
        
    } catch (error) {
        console.log('Erro ao enviar mensagem com men√ß√µes:', error.message);
        // Fallback: enviar sem men√ß√µes
        await client.sendMessage(groupId, texto);
    }
}

function criarAgendamento(messageId) {
    const message = botData.messages.find(m => m.id === messageId);
    if (!message || !message.active) return;
    
    // Verificar se j√° passou da data de fim
    if (message.endDate && moment().isAfter(moment(message.endDate))) {
        message.active = false;
        salvarDados();
        return;
    }
    
    // Verificar se ainda n√£o chegou na data de in√≠cio
    if (message.startDate && moment().isBefore(moment(message.startDate))) {
        // Agendar para come√ßar na data de in√≠cio
        const startTime = moment(message.startDate);
        const delay = startTime.diff(moment());
        
        setTimeout(() => {
            criarAgendamento(messageId);
        }, delay);
        return;
    }
    
    // Criar job de agendamento
    const cronExpression = `*/${message.intervalMinutes} * * * *`;
    
    if (botData.scheduledJobs[messageId]) {
        botData.scheduledJobs[messageId].destroy();
    }
    
    botData.scheduledJobs[messageId] = cron.schedule(cronExpression, async () => {
        const msg = botData.messages.find(m => m.id === messageId);
        
        if (!msg || !msg.active) {
            botData.scheduledJobs[messageId].destroy();
            delete botData.scheduledJobs[messageId];
            return;
        }
        
        // Verificar se passou da data de fim
        if (msg.endDate && moment().isAfter(moment(msg.endDate))) {
            msg.active = false;
            botData.scheduledJobs[messageId].destroy();
            delete botData.scheduledJobs[messageId];
            salvarDados();
            return;
        }
        
        // Enviar mensagem para todos os grupos
        for (const grupo of grupos) {
            try {
                if (msg.withMentions) {
                    await enviarMensagemComMencoes(grupo.id, msg.text);
                } else {
                    await client.sendMessage(grupo.id, msg.text);
                }
                
                // Delay entre grupos
                await new Promise(resolve => setTimeout(resolve, 2000));
            } catch (error) {
                console.log(`Erro ao enviar para grupo ${grupo.name}:`, error.message);
            }
        }
        
        console.log(`[${formatarTempo()}] Mensagem "${msg.name}" enviada para ${grupos.length} grupos`);
    }, {
        scheduled: false
    });
    
    botData.scheduledJobs[messageId].start();
}

function pararTodosAgendamentos() {
    Object.keys(botData.scheduledJobs).forEach(messageId => {
        if (botData.scheduledJobs[messageId]) {
            botData.scheduledJobs[messageId].destroy();
            delete botData.scheduledJobs[messageId];
        }
    });
}

function iniciarAgendamentos() {
    botData.messages.forEach(message => {
        if (message.active) {
            criarAgendamento(message.id);
        }
    });
}

// Event listeners
client.on('qr', (qr) => {
    console.log('\nüîó Escaneie o QR Code abaixo com seu WhatsApp:');
    qrcode.generate(qr, { small: true });
    console.log('\nüì± Abra o WhatsApp > Menu > Dispositivos conectados > Conectar dispositivo');
});

client.on('ready', async () => {
    console.log('\n‚úÖ Bot conectado com sucesso!');
    console.log(`üì± N√∫mero: ${client.info.wid.user}`);
    console.log(`üë§ Nome: ${client.info.pushname}`);
    console.log(`‚è∞ Conectado em: ${formatarTempo()}`);
    
    carregarDados();
    
    // Atualizar lista de grupos
    const chats = await client.getChats();
    grupos = chats.filter(chat => chat.isGroup).map(grupo => ({
        id: grupo.id._serialized,
        name: grupo.name,
        participants: grupo.participants ? grupo.participants.length : 0
    }));
    
    botData.groups = grupos;
    salvarDados();
    
    console.log(`üìä ${grupos.length} grupos detectados`);
    
    // Iniciar agendamentos se o bot estiver ativo
    if (botData.isActive) {
        iniciarAgendamentos();
        console.log('üöÄ Agendamentos iniciados automaticamente');
    }
});

client.on('message', async (message) => {
    const from = message.from;
    const body = message.body.trim();
    const userId = message.author || from;
    
    try {
        // Verificar c√≥digo secreto
        if (body === CONFIG.SECRET_CODE) {
            if (!isAuthorized(userId)) {
                botData.authorizedUsers.push(userId);
                salvarDados();
            }
            
            await client.sendMessage(from, `‚úÖ C√≥digo aceito! Voc√™ agora tem acesso ao ${CONFIG.BOT_NAME}\n\nDigite "menu" para ver os comandos dispon√≠veis.`);
            return;
        }
        
        // Verificar se usu√°rio est√° autorizado
        if (!isAuthorized(userId)) {
            return; // Ignorar mensagens de usu√°rios n√£o autorizados
        }
        
        // Processar comandos
        const args = body.toLowerCase().split(' ');
        const command = args[0];
        
        switch (command) {
            case 'menu':
                await enviarMenu(from);
                break;
                
            case 'ativar':
                await ativarBot(from);
                break;
                
            case 'desativar':
                await desativarBot(from);
                break;
                
            case 'status':
                await mostrarStatus(from);
                break;
                
            case 'grupos':
                await listarGrupos(from);
                break;
                
            case 'mensagens':
                await listarMensagens(from);
                break;
                
            case 'adicionar':
                await iniciarAdicionarMensagem(from, message);
                break;
                
            case 'remover':
                const idRemover = parseInt(args[1]);
                await removerMensagem(from, idRemover);
                break;
                
            case 'pausar':
                const idPausar = parseInt(args[1]);
                await pausarMensagem(from, idPausar);
                break;
                
            case 'retomar':
                const idRetomar = parseInt(args[1]);
                await retomarMensagem(from, idRetomar);
                break;
                
            case 'tempo':
                await mostrarTempos(from);
                break;
                
            case 'ajuda':
                await enviarAjuda(from);
                break;
                
            default:
                await client.sendMessage(from, '‚ùå Comando n√£o reconhecido. Digite "menu" para ver os comandos dispon√≠veis.');
        }
    } catch (error) {
        console.log('Erro ao processar comando:', error);
        await client.sendMessage(from, '‚ùå Erro ao processar comando. Tente novamente.');
    }
});

// Fun√ß√µes dos comandos
async function enviarMenu(chatId) {
    const menu = `
ü§ñ *${CONFIG.BOT_NAME}*
üìã *MENU DE COMANDOS*

*üîß CONTROLE DO BOT:*
‚Ä¢ ativar - Ativar o bot
‚Ä¢ desativar - Desativar o bot
‚Ä¢ status - Ver status do bot

*üì¢ GERENCIAR MENSAGENS:*
‚Ä¢ adicionar - Adicionar nova mensagem
‚Ä¢ mensagens - Listar mensagens
‚Ä¢ remover <id> - Remover mensagem
‚Ä¢ pausar <id> - Pausar mensagem
‚Ä¢ retomar <id> - Retomar mensagem

*‚ÑπÔ∏è INFORMA√á√ïES:*
‚Ä¢ grupos - Listar grupos
‚Ä¢ tempo - Ver pr√≥ximos envios
‚Ä¢ ajuda - Ajuda detalhada
‚Ä¢ menu - Este menu

‚ö° *Status:* ${botData.isActive ? 'üü¢ Ativo' : 'üî¥ Inativo'}
`;
    
    await client.sendMessage(chatId, menu);
}

async function ativarBot(chatId) {
    if (botData.isActive) {
        await client.sendMessage(chatId, '‚ö†Ô∏è Bot j√° est√° ativo!');
        return;
    }
    
    botData.isActive = true;
    salvarDados();
    
    iniciarAgendamentos();
    
    await client.sendMessage(chatId, `‚úÖ Bot ativado com sucesso!\n\nüìä ${botData.messages.filter(m => m.active).length} mensagens ativas\nüì± ${grupos.length} grupos conectados`);
}

async function desativarBot(chatId) {
    if (!botData.isActive) {
        await client.sendMessage(chatId, '‚ö†Ô∏è Bot j√° est√° inativo!');
        return;
    }
    
    botData.isActive = false;
    salvarDados();
    
    pararTodosAgendamentos();
    
    await client.sendMessage(chatId, 'üõë Bot desativado! Todos os agendamentos foram pausados.');
}

async function mostrarStatus(chatId) {
    const uptime = process.uptime();
    const horas = Math.floor(uptime / 3600);
    const minutos = Math.floor((uptime % 3600) / 60);
    
    const mensagensAtivas = botData.messages.filter(m => m.active).length;
    
    const status = `
üìä *STATUS DO BOT*

ü§ñ *Bot:* ${CONFIG.BOT_NAME}
üîÑ *Status:* ${botData.isActive ? 'üü¢ Ativo' : 'üî¥ Inativo'}

üìà *Estat√≠sticas:*
üì± Grupos conectados: ${grupos.length}
üìù Mensagens cadastradas: ${botData.messages.length}
‚úÖ Mensagens ativas: ${mensagensAtivas}
üë• Usu√°rios autorizados: ${botData.authorizedUsers.length}

üîß *Sistema:*
‚è∞ Tempo ativo: ${horas}h ${minutos}m
üìÖ Data/Hora: ${formatarTempo()}
üíª Node.js: ${process.version}
`;
    
    await client.sendMessage(chatId, status);
}

async function listarGrupos(chatId) {
    if (grupos.length === 0) {
        await client.sendMessage(chatId, '‚ùå Nenhum grupo encontrado.');
        return;
    }
    
    let lista = `üìä *GRUPOS CONECTADOS (${grupos.length})*\n\n`;
    
    grupos.forEach((grupo, index) => {
        lista += `${index + 1}. *${grupo.name}*\n`;
        lista += `   üë• ${grupo.participants} participantes\n\n`;
    });
    
    await client.sendMessage(chatId, lista);
}

async function listarMensagens(chatId) {
    if (botData.messages.length === 0) {
        await client.sendMessage(chatId, '‚ùå Nenhuma mensagem cadastrada.\n\nUse "adicionar" para criar uma nova mensagem.');
        return;
    }
    
    let lista = `üìù *MENSAGENS CADASTRADAS (${botData.messages.length})*\n\n`;
    
    botData.messages.forEach((msg, index) => {
        const status = msg.active ? 'üü¢ Ativa' : 'üî¥ Pausada';
        const preview = msg.text.length > 30 ? msg.text.substring(0, 30) + '...' : msg.text;
        
        lista += `*${msg.id}.* ${msg.name}\n`;
        lista += `üìÑ ${preview}\n`;
        lista += `‚è∞ Intervalo: ${msg.intervalMinutes} min\n`;
        lista += `üîÑ Status: ${status}\n`;
        
        if (msg.startDate) {
            lista += `üü¢ In√≠cio: ${moment(msg.startDate).format('DD/MM/YY HH:mm')}\n`;
        }
        if (msg.endDate) {
            lista += `üî¥ Fim: ${moment(msg.endDate).format('DD/MM/YY HH:mm')}\n`;
        }
        
        lista += `üë• Men√ß√µes: ${msg.withMentions ? 'Sim' : 'N√£o'}\n\n`;
    });
    
    lista += `\nüí° Use "pausar <id>" ou "retomar <id>" para controlar`;
    
    await client.sendMessage(chatId, lista);
}

async function iniciarAdicionarMensagem(chatId, originalMessage) {
    if (botData.messages.length >= 5) {
        await client.sendMessage(chatId, '‚ùå Limite m√°ximo de 5 mensagens atingido!\n\nRemova uma mensagem antes de adicionar outra.');
        return;
    }
    
    await client.sendMessage(chatId, `üìù *ADICIONAR NOVA MENSAGEM*\n\nResponda as pr√≥ximas perguntas para configurar sua mensagem:\n\n1Ô∏è‚É£ *Nome da mensagem:*\nDigite um nome para identificar esta mensagem:`);
    
    // Aguardar resposta do nome
    const nomeFilter = (msg) => msg.from === chatId && msg.author === originalMessage.author;
    
    client.once('message', async (nomeMsg) => {
        if (!nomeFilter(nomeMsg)) return;
        
        const nome = nomeMsg.body.trim();
        
        await client.sendMessage(chatId, `2Ô∏è‚É£ *Texto da mensagem:*\nDigite o texto que ser√° enviado:`);
        
        client.once('message', async (textoMsg) => {
            if (!nomeFilter(textoMsg)) return;
            
            const texto = textoMsg.body.trim();
            
            await client.sendMessage(chatId, `3Ô∏è‚É£ *Intervalo de envio:*\nDigite o intervalo em minutos (ex: 60 para 1 hora):`);
            
            client.once('message', async (intervaloMsg) => {
                if (!nomeFilter(intervaloMsg)) return;
                
                const intervalo = parseInt(intervaloMsg.body.trim());
                
                if (isNaN(intervalo) || intervalo < 1) {
                    await client.sendMessage(chatId, '‚ùå Intervalo inv√°lido! Processo cancelado.');
                    return;
                }
                
                await client.sendMessage(chatId, `4Ô∏è‚É£ *Incluir men√ß√µes:*\nDeseja mencionar todos os membros dos grupos?\nResponda: sim ou n√£o`);
                
                client.once('message', async (mencaoMsg) => {
                    if (!nomeFilter(mencaoMsg)) return;
                    
                    const mencoes = mencaoMsg.body.trim().toLowerCase() === 'sim';
                    
                    await client.sendMessage(chatId, `5Ô∏è‚É£ *Data de in√≠cio (opcional):*\nDigite a data/hora de in√≠cio no formato: DD/MM/AAAA HH:MM\nOu digite "agora" para come√ßar imediatamente:`);
                    
                    client.once('message', async (inicioMsg) => {
                        if (!nomeFilter(inicioMsg)) return;
                        
                        let dataInicio = null;
                        const inicioTexto = inicioMsg.body.trim().toLowerCase();
                        
                        if (inicioTexto !== 'agora') {
                            dataInicio = moment(inicioTexto, 'DD/MM/YYYY HH:mm');
                            if (!dataInicio.isValid()) {
                                await client.sendMessage(chatId, '‚ùå Data de in√≠cio inv√°lida! Usando "agora".');
                                dataInicio = null;
                            }
                        }
                        
                        await client.sendMessage(chatId, `6Ô∏è‚É£ *Data de fim (opcional):*\nDigite a data/hora de fim no formato: DD/MM/AAAA HH:MM\nOu digite "nunca" para n√£o ter fim:`);
                        
                        client.once('message', async (fimMsg) => {
                            if (!nomeFilter(fimMsg)) return;
                            
                            let dataFim = null;
                            const fimTexto = fimMsg.body.trim().toLowerCase();
                            
                            if (fimTexto !== 'nunca') {
                                dataFim = moment(fimTexto, 'DD/MM/YYYY HH:mm');
                                if (!dataFim.isValid()) {
                                    await client.sendMessage(chatId, '‚ùå Data de fim inv√°lida! Usando "nunca".');
                                    dataFim = null;
                                }
                            }
                            
                            // Criar nova mensagem
                            const novaMensagem = {
                                id: botData.messages.length + 1,
                                name: nome,
                                text: texto,
                                intervalMinutes: intervalo,
                                withMentions: mencoes,
                                startDate: dataInicio ? dataInicio.toISOString() : null,
                                endDate: dataFim ? dataFim.toISOString() : null,
                                active: true,
                                createdAt: new Date().toISOString()
                            };
                            
                            botData.messages.push(novaMensagem);
                            salvarDados();
                            
                            // Iniciar agendamento se bot estiver ativo
                            if (botData.isActive) {
                                criarAgendamento(novaMensagem.id);
                            }
                            
                            const resumo = `
‚úÖ *MENSAGEM CRIADA COM SUCESSO!*

üìù *Nome:* ${nome}
üìÑ *Texto:* ${texto.substring(0, 50)}${texto.length > 50 ? '...' : ''}
‚è∞ *Intervalo:* ${intervalo} minutos
üë• *Men√ß√µes:* ${mencoes ? 'Sim' : 'N√£o'}
üü¢ *In√≠cio:* ${dataInicio ? dataInicio.format('DD/MM/YY HH:mm') : 'Agora'}
üî¥ *Fim:* ${dataFim ? dataFim.format('DD/MM/YY HH:mm') : 'Nunca'}

üöÄ *Status:* ${botData.isActive ? 'Agendamento iniciado!' : 'Aguardando ativa√ß√£o do bot'}
`;
                            
                            await client.sendMessage(chatId, resumo);
                        });
                    });
                });
            });
        });
    });
}

async function removerMensagem(chatId, id) {
    const index = botData.messages.findIndex(m => m.id === id);
    
    if (index === -1) {
        await client.sendMessage(chatId, '‚ùå Mensagem n√£o encontrada!');
        return;
    }
    
    const mensagem = botData.messages[index];
    
    // Parar agendamento
    if (botData.scheduledJobs[id]) {
        botData.scheduledJobs[id].destroy();
        delete botData.scheduledJobs[id];
    }
    
    // Remover mensagem
    botData.messages.splice(index, 1);
    salvarDados();
    
    await client.sendMessage(chatId, `‚úÖ Mensagem "${mensagem.name}" removida com sucesso!`);
}

async function pausarMensagem(chatId, id) {
    const mensagem = botData.messages.find(m => m.id === id);
    
    if (!mensagem) {
        await client.sendMessage(chatId, '‚ùå Mensagem n√£o encontrada!');
        return;
    }
    
    if (!mensagem.active) {
        await client.sendMessage(chatId, '‚ö†Ô∏è Mensagem j√° est√° pausada!');
        return;
    }
    
    mensagem.active = false;
    salvarDados();
    
    // Parar agendamento
    if (botData.scheduledJobs[id]) {
        botData.scheduledJobs[id].destroy();
        delete botData.scheduledJobs[id];
    }
    
    await client.sendMessage(chatId, `‚è∏Ô∏è Mensagem "${mensagem.name}" pausada!`);
}

async function retomarMensagem(chatId, id) {
    const mensagem = botData.messages.find(m => m.id === id);
    
    if (!mensagem) {
        await client.sendMessage(chatId, '‚ùå Mensagem n√£o encontrada!');
        return;
    }
    
    if (mensagem.active) {
        await client.sendMessage(chatId, '‚ö†Ô∏è Mensagem j√° est√° ativa!');
        return;
    }
    
    mensagem.active = true;
    salvarDados();
    
    // Iniciar agendamento se bot estiver ativo
    if (botData.isActive) {
        criarAgendamento(id);
    }
    
    await client.sendMessage(chatId, `‚ñ∂Ô∏è Mensagem "${mensagem.name}" retomada!`);
}

async function mostrarTempos(chatId) {
    const mensagensAtivas = botData.messages.filter(m => m.active);
    
    if (mensagensAtivas.length === 0) {
        await client.sendMessage(chatId, '‚ùå Nenhuma mensagem ativa no momento.');
        return;
    }
    
    let lista = `‚è∞ *PR√ìXIMOS ENVIOS*\n\n`;
    
    mensagensAtivas.forEach(msg => {
        const agora = moment();
        const proximoEnvio = agora.clone().add(msg.intervalMinutes, 'minutes');
        
        lista += `üìù *${msg.name}*\n`;
        lista += `‚è∞ Pr√≥ximo envio: ${proximoEnvio.format('DD/MM HH:mm')}\n`;
        lista += `üîÑ Intervalo: ${msg.intervalMinutes} min\n`;
        
        if (msg.endDate) {
            const fimEm = moment(msg.endDate);
            const tempoRestante = fimEm.diff(agora);
            
            if (tempoRestante > 0) {
                lista += `‚è≥ Termina em: ${formatarDuracao(tempoRestante)}\n`;
            } else {
                lista += `üî¥ Expirada\n`;
            }
        }
        
        lista += '\n';
    });
    
    await client.sendMessage(chatId, lista);
}

async function enviarAjuda(chatId) {
    const ajuda = `
‚ùì *AJUDA - BOT DIVULGA√á√ÉO AVAN√áADO*

*üîê ACESSO:*
‚Ä¢ Digite "${CONFIG.SECRET_CODE}" para obter acesso

*üéØ COMO USAR:*

1Ô∏è‚É£ *Ativar o bot:*
   Digite "ativar"

2Ô∏è‚É£ *Adicionar mensagem:*
   Digite "adicionar" e siga as instru√ß√µes

3Ô∏è‚É£ *Gerenciar mensagens:*
   ‚Ä¢ "mensagens" - Ver todas
   ‚Ä¢ "pausar <id>" - Pausar mensagem
   ‚Ä¢ "retomar <id>" - Retomar mensagem
   ‚Ä¢ "remover <id>" - Remover mensagem

4Ô∏è‚É£ *Monitorar:*
   ‚Ä¢ "status" - Status do bot
   ‚Ä¢ "tempo" - Pr√≥ximos envios
   ‚Ä¢ "grupos" - Grupos conectados

*‚ö†Ô∏è IMPORTANTE:*
‚Ä¢ M√°ximo 5 mensagens simult√¢neas
‚Ä¢ Men√ß√µes funcionam em grupos
‚Ä¢ Bot precisa estar nos grupos
‚Ä¢ Mantenha Termux ativo

*üîß CONFIGURA√á√ÉO:*
‚Ä¢ Intervalos em minutos
‚Ä¢ Datas no formato DD/MM/AAAA HH:MM
‚Ä¢ Agendamentos autom√°ticos

*üìû SUPORTE:*
‚Ä¢ Verifique logs no terminal
‚Ä¢ Reinicie se necess√°rio
`;
    
    await client.sendMessage(chatId, ajuda);
}

// Inicializar bot
console.log('üöÄ Iniciando Bot de Divulga√ß√£o Avan√ßado...');
console.log('üìã Configura√ß√µes:');
console.log(`   üîê C√≥digo secreto: ${CONFIG.SECRET_CODE}`);
console.log(`   üìÅ Dados: ${CONFIG.DATA_FILE}`);
console.log('');

client.initialize();

